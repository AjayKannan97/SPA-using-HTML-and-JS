<!DOCTYPE html>
<html>
  	<body>
		<a href="https://test.edpl.us/student-skills-projects/stockchart/index.html">Question Source</a>
	    <div class="vl"></div>

	    <div style="display:flex; ">
	    
	      	<div>
		        <h1 ><div style="color:red">Enter Name of the Company</h1>
		        	<input type="text" id="stock">
		        	<input type="submit" value="Submit" onclick="formdata()"/>
	      
	      	</div>
	      
	      	<hr>
	      		<div>
	      			<ul>
	        			<h2></h2>
	    			</ul>
	        
	      		</div>
	    	</div>
		</div>
    	<script>
	    	const myHeading = document.querySelector('h2');
	    	var sting;
	    	var Stock = stock;
	    	var getJSON = function(url, callback) {
			    var xhr = new XMLHttpRequest();
			    xhr.open('GET', url, true);
			    xhr.responseType = 'json';
			    xhr.onload = function() {
			      var status = xhr.status;
			      if (status === 200) {
			        callback(null, xhr.response);
			      } else {
			        callback(status, xhr.response);
			      }
			    };
			    xhr.send();
			};
			
			function f(err, data) {
			  	if (err !== null) {
			    	alert('Something went wrong: ' + err);
			  	} else {
			  		// string = JSON.stringify(data)
			  		//const obj = JSON.parse(data)
			  		//document.querySelector('h2').innerHTML = obj.name;
			    	// myHeading.textContent = ('Your JSON : ' + data);
			    	string = data
			    	d = string[["Time Series (Daily)"]]
			    	console.log(d["2022-02-04"])
			    	myHeading.textContent = ('Current stock price : ' +  JSON.stringify(d["2022-02-04"]));
			  	}
			}

			function formdata() 
			{
				var stock = document.getElementById("stock").value;
				// document.writeln("The first name you entered is " + stock + "<br>");
				myHeading.textContent = stock;

				// replace the "demo" apikey below with your own key from https://www.alphavantage.co/support/#api-key
				var url = 'https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol='+stock+'&apikey=DXH59Z2UYVPZBV0X';
				//DXH59Z2UYVPZBV0X';
				//window.alert(JSON.stringify(url));

				myHeading.textContent =getJSON(url,f);
			}

			//const obj = JSON.stringify(string)
			//document.getElementById("h2").innerHTML = string["Time Series (Daily)"];
  		</script>
  	</body>
</html>



